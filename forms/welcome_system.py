import discord
from discord import ui

class WelcomeSystem:
    """–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"""
    
    @staticmethod
    async def send_welcome_message(member: discord.Member):
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
        try:
            # –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ embed —Å–æ–æ–±—â–µ–Ω–∏–µ
            embed = discord.Embed(
                title="üéñÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –í–æ–æ—Ä—É–∂—ë–Ω–Ω—ã–µ –°–∏–ª—ã –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏!",
                description=f"–ü—Ä–∏–≤–µ—Ç, {member.mention}! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä!",
                color=0x00FF00,  # –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
                timestamp=discord.utils.utcnow()
            )
            embed.set_thumbnail(url="https://i.imgur.com/07MRSyl.png")  # –õ–æ–≥–æ—Ç–∏–ø –í–° –†–§
            
            # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–µ–π
            from utils.config_manager import load_config
            config = load_config()
            role_assignment_channel_id = config.get('role_assignment_channel')
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –∫–∞–Ω–∞–ª–∞ –µ—Å–ª–∏ –æ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω
            if role_assignment_channel_id:
                role_channel = member.guild.get_channel(role_assignment_channel_id)
                if role_channel:
                    step_text = f"1. **–ü–æ–ª—É—á–∏—Ç–µ —Ä–æ–ª—å** - –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ {role_channel.mention}\n"
                else:
                    step_text = "1. **–ü–æ–ª—É—á–∏—Ç–µ —Ä–æ–ª—å** - –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞–Ω–∞–ª –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–µ–π\n"
            else:
                step_text = "1. **–ü–æ–ª—É—á–∏—Ç–µ —Ä–æ–ª—å** - –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞–Ω–∞–ª –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–µ–π\n"
            
            # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
            embed.add_field(
                name="üìã –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?",
                value=(
                    step_text +
                    "2. **–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏** —Å–µ—Ä–≤–µ—Ä–∞\n"
                    "3. **–ù–∞—á–Ω–∏—Ç–µ —Å–ª—É–∂–±—É** –∏–ª–∏ **–ø–æ–ª—É—á–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –≥–æ—Å—Å–ª—É–∂–∞—â–µ–≥–æ**"
                ),
                inline=False
            )
            
            embed.add_field(
                name="ü™ñ –•–æ—Ç–∏—Ç–µ —Å–ª—É–∂–∏—Ç—å –≤ –í–° –†–§?",
                value=(
                    "‚Ä¢ –ï—Å–ª–∏ –≤—ã –ø—Ä–æ—à–ª–∏ **–ø—Ä–∏–∑—ã–≤** –∏–ª–∏ **—ç–∫—Å–∫—É—Ä—Å–∏—é** - –ø–æ–ª—É—á–∏—Ç–µ —Ä–æ–ª—å –≤–æ–µ–Ω–Ω–æ—Å–ª—É–∂–∞—â–µ–≥–æ\n"
                    "‚Ä¢ –ù–∞—á–Ω–∏—Ç–µ —Å–æ –∑–≤–∞–Ω–∏—è **–†—è–¥–æ–≤–æ–π** –∏ –ø–æ–≤—ã—à–∞–π—Ç–µ—Å—å –ø–æ —Å–ª—É–∂–±–µ\n"
                    "‚Ä¢ –£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –∑–∞–Ω—è—Ç–∏—è—Ö –∏ –æ–±—É—á–µ–Ω–∏–∏"
                ),
                inline=False
            )
            
            embed.add_field(
                name="üë§ –Ø–≤–ª—è–µ—Ç–µ—Å—å –≥–æ—Å—Å–ª—É–∂–∞—â–∏–º?",
                value=(
                    "‚Ä¢ –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–Ω–∏–∫ **–£–í–î, –§–°–ë, –¶–ì–ë** –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –≥–æ—Å–æ—Ä–≥–∞–Ω–∞\n"
                    "‚Ä¢ –ï—Å–ª–∏ –≤—ã **–ø–æ—Å—Ç–∞–≤—â–∏–∫** –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\n"
                    "‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º"
                ),
                inline=False            )
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
            if role_assignment_channel_id:
                role_channel = member.guild.get_channel(role_assignment_channel_id)
                if role_channel:
                    channels_text = f"‚Ä¢ {role_channel.mention} - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—á–∞–ª–∞\n"
                else:
                    channels_text = "‚Ä¢ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—á–∞–ª–∞\n"
            else:
                channels_text = "‚Ä¢ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—á–∞–ª–∞\n"
            
            embed.add_field(
                name="üîó –ü–æ–ª–µ–∑–Ω—ã–µ –∫–∞–Ω–∞–ª—ã",
                value=(
                    channels_text +
                    "‚Ä¢ <#1250694899049955470> - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é\n"
                    "‚Ä¢ <#1246119159830679552> - –∫–∞–Ω–∞–ª—ã –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏\n"
                    "‚Ä¢ <#1246118965810303009> - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å"
                ),
                inline=False
            )
            
            embed.set_footer(
                text="–ñ–µ–ª–∞–µ–º —É—Å–ø–µ—à–Ω–æ–π —Å–ª—É–∂–±—ã! | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –í–° –†–§",
                icon_url=member.guild.icon.url if member.guild.icon else None
            )
            
            # –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
            view = WelcomeButtonsView()
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –õ–°
            try:
                await member.send(embed=embed, view=view)
                print(f"‚úÖ Sent welcome message to {member.display_name} ({member.id})")
                return True
            except discord.Forbidden:
                print(f"‚ùå Cannot send DM to {member.display_name} - DMs disabled")
                return False
                
        except Exception as e:
            print(f"Error sending welcome message to {member.display_name}: {e}")
            return False


class WelcomeButtonsView(ui.View):
    """–ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    def __init__(self):
        super().__init__(timeout=None)
    
    @discord.ui.button(
        label="ü™ñ –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –≤–æ–µ–Ω–Ω–æ—Å–ª—É–∂–∞—â–µ–≥–æ", 
        style=discord.ButtonStyle.green,
        custom_id="welcome_military_role"
    )
    async def get_military_role(self, interaction: discord.Interaction, button: discord.ui.Button):
        """–ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–æ–µ–Ω–Ω–æ–π —Ä–æ–ª–∏"""
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–µ–π
        from utils.config_manager import load_config
        config = load_config()
        role_assignment_channel_id = config.get('role_assignment_channel')
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –∫–∞–Ω–∞–ª–∞
        if role_assignment_channel_id:
            role_channel = interaction.guild.get_channel(role_assignment_channel_id)
            if role_channel:
                channel_text = f"1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞–Ω–∞–ª {role_channel.mention}\n"
            else:
                channel_text = "1. –ù–∞–π–¥–∏—Ç–µ –∫–∞–Ω–∞–ª **\"–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π\"** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n"
        else:
            channel_text = "1. –ù–∞–π–¥–∏—Ç–µ –∫–∞–Ω–∞–ª **\"–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π\"** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n"

        await interaction.response.send_message(
            "üéñÔ∏è **–û—Ç–ª–∏—á–Ω–æ! –í—ã –≤—ã–±—Ä–∞–ª–∏ —Å–ª—É–∂–±—É –≤ –í–æ–æ—Ä—É–∂—ë–Ω–Ω—ã—Ö –°–∏–ª–∞—Ö –†–§.**\n\n"
            "üìã **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**\n"
            f"{channel_text}"
            "2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **\"–ü—Ä–∏–∑—ã–≤ / –≠–∫—Å–∫—É—Ä—Å–∏—è\"**\n"
            "3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏\n"
            "4. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–¥–æ–±—Ä–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –í–æ–µ–Ω–Ω–æ–≥–æ –ö–æ–º–∏—Å—Å–∞—Ä–∏–∞—Ç–∞\n\n"
            "üí° **–°–æ–≤–µ—Ç:** –û–±—ã—á–Ω–æ —ç—Ç–æ –∑–≤–∞–Ω–∏–µ **\"–†—è–¥–æ–≤–æ–π\"** –¥–ª—è –Ω–æ–≤–æ–±—Ä–∞–Ω—Ü–µ–≤.",
            ephemeral=True
        )
    @discord.ui.button(
        label="üë§ –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –≥–æ—Å—Å–ª—É–∂–∞—â–µ–≥–æ", 
        style=discord.ButtonStyle.secondary,
        custom_id="welcome_civilian_role"
    )
    async def get_civilian_role(self, interaction: discord.Interaction, button: discord.ui.Button):
        """–ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–π —Ä–æ–ª–∏"""
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–µ–π
        from utils.config_manager import load_config
        config = load_config()
        role_assignment_channel_id = config.get('role_assignment_channel')
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –∫–∞–Ω–∞–ª–∞
        if role_assignment_channel_id:
            role_channel = interaction.guild.get_channel(role_assignment_channel_id)
            if role_channel:
                channel_text = f"1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞–Ω–∞–ª {role_channel.mention}\n"
            else:
                channel_text = "1. –ù–∞–π–¥–∏—Ç–µ –∫–∞–Ω–∞–ª **\"–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π\"** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n"
        else:
            channel_text = "1. –ù–∞–π–¥–∏—Ç–µ –∫–∞–Ω–∞–ª **\"–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π\"** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n"
        
        await interaction.response.send_message(
            "üèõÔ∏è **–û—Ç–ª–∏—á–Ω–æ! –í—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –≥–æ—Å—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.**\n\n"
            "üìã **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**\n"
            f"{channel_text}"
            "2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **\"–Ø –≥–æ—Å—Å–ª—É–∂–∞—â–∏–π\"** –∏–ª–∏ **\"–Ø –ø–æ—Å—Ç–∞–≤—â–∏–∫\"**\n"
            "3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\n"
            "4. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞\n"
            "5. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–¥–æ–±—Ä–µ–Ω–∏—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –í–° –†–§\n\n"
            "üí° **–°–æ–≤–µ—Ç:** –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∑–∞—Ä–∞–Ω–µ–µ.",
            ephemeral=True
        )
    
    @discord.ui.button(
        label="üìö –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∞–≤–∏–ª–∞", 
        style=discord.ButtonStyle.primary,
        custom_id="welcome_rules"
    )
    async def view_rules(self, interaction: discord.Interaction, button: discord.ui.Button):
        """–ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∞–≤–∏–ª"""
        await interaction.response.send_message(
            "üìö **–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã!**\n\n"
            "üîç **–ì–¥–µ –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞:**\n"
            "‚Ä¢ –ù–∞–π–¥–∏—Ç–µ –∫–∞–Ω–∞–ª <#1250694899049955470> –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n"
            "‚Ä¢ –û–±—ã—á–Ω–æ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤\n"
            "‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –≤—Å–µ –ø—É–Ω–∫—Ç—ã\n\n"
            "‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–µ–∑–Ω–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏!\n\n"
            "üìã **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**\n"
            "‚Ä¢ –£–≤–∞–∂–µ–Ω–∏–µ –∫ –¥—Ä—É–≥–∏–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º\n"
            "‚Ä¢ –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—É–±–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏\n"
            "‚Ä¢ –ó–∞–ø—Ä–µ—Ç –Ω–∞ —Å–ø–∞–º –∏ –æ—Ñ—Ñ—Ç–æ–ø\n"
            "‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã—Ö –Ω–∏–∫–Ω–µ–π–º–æ–≤",
            ephemeral=True
        )


# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
def setup_welcome_events(bot):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è"""
    
    @bot.event
    async def on_member_join(member):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä"""
        print(f"üëã New member joined: {member.display_name} ({member.id})")
        
        try:
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –õ–°
            dm_sent = await WelcomeSystem.send_welcome_message(member)
            
            # –õ–æ–≥–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ
            print(f"‚úÖ Welcome process completed for {member.display_name} (DM: {'‚úÖ' if dm_sent else '‚ùå'})")
            
        except Exception as e:
            print(f"‚ùå Error in welcome process for {member.display_name}: {e}")
    
    print("‚úÖ Welcome system events registered")
