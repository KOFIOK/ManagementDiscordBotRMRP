"""
–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
"""
import discord


async def send_moderator_welcome_dm(user: discord.Member) -> bool:
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É –≤ –õ–°"""
    try:
        embed = discord.Embed(
            title="üéñÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤!",
            description="–í—ã –±—ã–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã **–º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º** –≤ —Å–∏—Å—Ç–µ–º–µ –∫–∞–¥—Ä–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –í–∞—à–µ–π –§—Ä–∞–∫—Ü–∏–∏",
            color=discord.Color.blue(),
            timestamp=discord.utils.utcnow()
        )
        
        embed.add_field(
            name="üõ°Ô∏è –í–∞—à–∏ –ø—Ä–∞–≤–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:",
            value=(
                "- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω–æ–≥–æ —Ä–æ–¥–∞ –∑–∞—è–≤–æ–∫**\n> - –∫–Ω–æ–ø–∫–∏ `‚úÖ –û–¥–æ–±—Ä–∏—Ç—å` / `‚ùå –û—Ç–∫–∞–∑–∞—Ç—å`\n"
                "- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∫–ª–∞–¥–∞**\n> - –≤—ã–¥–∞—á–∞ —Å–∫–ª–∞–¥—Å–∫–æ–≥–æ –∏–º—É—â–µ—Å—Ç–≤–∞\n"
                "- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è**\n> - –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–æ–≥–ª–∞—Å–Ω–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ discord —Ä–æ–ª–µ–π\n"
                "- **–ö–∞–¥—Ä–æ–≤—ã–π –∞—É–¥–∏—Ç**\n> - –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ —É—á—ë—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞\n"
            ),
            inline=False
        )
        
        embed.add_field(
            name="‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:",
            value=(
                "- –í—ã **–ù–ï –º–æ–∂–µ—Ç–µ** –æ–¥–æ–±—Ä–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–ø–æ—Ä—Ç—ã\n"
                "- –í—ã **–ù–ï –º–æ–∂–µ—Ç–µ** –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–≤–Ω–æ–≥–æ/–≤—ã—Å—à–µ–≥–æ —É—Ä–æ–≤–Ω—è\n"
            ),
            inline=False
        )
        
        embed.add_field(
            name="‚ùì –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ",
            value=(
                "–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `/help` –Ω–∞ –¥–∏—Å–∫–æ—Ä–¥-—Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏ –ø–æ —Å–∏—Å—Ç–µ–º–µ\n"
                "> - –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–∏—Å—Ç–µ–º–µ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [GitHub](https://github.com/KOFIOK/armyDiscordBot)"
            ),
            inline=False
        )
        
        embed.set_footer(text="üí° –°–∏—Å—Ç–µ–º–∞ –∫–∞–¥—Ä–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
        embed.set_thumbnail(url=user.avatar.url if user.avatar else user.default_avatar.url)
        
        await user.send(embed=embed)
        return True
        
    except discord.Forbidden:
        print(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å DM –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É {user.display_name} - –∑–∞–∫—Ä—ã—Ç—ã –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è")
        return False
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ DM –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É {user.display_name}: {e}")
        return False


async def send_administrator_welcome_dm(user: discord.Member) -> bool:
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –≤ –õ–°"""
    try:
        embed = discord.Embed(
            title="üëë –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!",
            description="–í—ã –±—ã–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º** –≤ —Å–∏—Å—Ç–µ–º–µ –∫–∞–¥—Ä–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –í–∞—à–µ–π –§—Ä–∞–∫—Ü–∏–∏",
            color=discord.Color.gold(),
            timestamp=discord.utils.utcnow()
        )
        
        embed.add_field(
            name="üîë –í–∞—à–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞:",
            value=(
                "- **–í—Å–µ –ø—Ä–∞–≤–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞**\n> - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞—è–≤–æ–∫\n"
                "- **–ö–æ–º–∞–Ω–¥–∞ `/settings`**\n> - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã\n"
                "- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º–∏**\n> - –∫–æ–º–∞–Ω–¥—ã `/moder add/remove/list`\n"
                "- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏**\n> - –∫–æ–º–∞–Ω–¥—ã `/admin add/remove/list`\n"
                "- **–û–¥–æ–±—Ä–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫**\n> - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–±—è\n"
                "- **–í—ã—Å—à–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏**\n> - –º–æ–∂–µ—Ç–µ –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
            ),
            inline=False
        )
        
        embed.add_field(
            name="‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (/settings):",
            value=(
                "- **–ö–∞–Ω–∞–ª—ã –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π**\n> - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—è–≤–ª–µ–Ω–∏–π –≤ —á–∞—Å—Ç–∏\n"
                "- **–ö–∞–Ω–∞–ª—ã —Å–∏—Å—Ç–µ–º—ã**\n> - —É–≤–æ–ª—å–Ω–µ–Ω–∏—è, –∞—É–¥–∏—Ç, —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫, —Ä–æ–ª–∏, –º–µ–¥–∏—Ü–∏–Ω–∞\n"
                "- **–°–∏—Å—Ç–µ–º–∞ –ø–∏–Ω–≥–æ–≤**\n> - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º\n"
                "- **–†–æ–ª–∏-–∏—Å–∫–ª—é—á–µ–Ω–∏—è**\n> - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏, –Ω–µ —Å–Ω–∏–º–∞–µ–º—ã–º–∏ –ø—Ä–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏–∏\n"
                "- **–õ–∏–º–∏—Ç—ã —Å–∫–ª–∞–¥–∞**\n> - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º –∏ –∑–≤–∞–Ω–∏—è–º (–ù–ï –¢–ï–°–¢–ò–†–û–í–ê–õ–û–°–¨)\n"
                "- **–ò –¥—Ä—É–≥–∏–µ**\n> - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ `/help`\n"
            ),
            inline=False
        )
        
        embed.add_field(
            name="‚ùì –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ",
            value=(
                "–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `/help` –Ω–∞ –¥–∏—Å–∫–æ—Ä–¥-—Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏ –ø–æ —Å–∏—Å—Ç–µ–º–µ\n"
                "> - –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–∏—Å—Ç–µ–º–µ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [GitHub](https://github.com/KOFIOK/armyDiscordBot)"
            ),
            inline=False
        )
        
        embed.set_footer(text="üîê –°–∏—Å—Ç–µ–º–∞ –∫–∞–¥—Ä–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
        embed.set_thumbnail(url=user.avatar.url if user.avatar else user.default_avatar.url)
        
        await user.send(embed=embed)
        return True
        
    except discord.Forbidden:
        print(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å DM –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É {user.display_name} - –∑–∞–∫—Ä—ã—Ç—ã –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è")
        return False
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ DM –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É {user.display_name}: {e}")
        return False


def check_if_user_is_moderator(user: discord.Member, config: dict) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º"""
    # –í–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Ä–≤–µ—Ä–∞ –∏ Discord –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏, –Ω–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
    if user.guild.owner_id == user.id or user.guild_permissions.administrator:
        return False
    
    moderators = config.get('moderators', {'users': [], 'roles': []})
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä—è–º–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user.id in moderators.get('users', []):
        return True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ —Ä–æ–ª–∏
    moderator_role_ids = moderators.get('roles', [])
    user_role_ids = [role.id for role in user.roles]
    
    for role_id in moderator_role_ids:
        if role_id in user_role_ids:
            return True
    
    return False


def check_if_user_is_administrator(user: discord.Member, config: dict) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"""
    # –í–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Ä–≤–µ—Ä–∞ –∏ Discord –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏
    if user.guild.owner_id == user.id or user.guild_permissions.administrator:
        return True
    
    administrators = config.get('administrators', {'users': [], 'roles': []})
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä—è–º–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user.id in administrators.get('users', []):
        return True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ —Ä–æ–ª–∏
    admin_role_ids = administrators.get('roles', [])
    user_role_ids = [role.id for role in user.roles]
    
    for role_id in admin_role_ids:
        if role_id in user_role_ids:
            return True
    
    return False
